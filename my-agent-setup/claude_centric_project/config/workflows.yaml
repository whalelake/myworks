# Workflow Definitions
# 다양한 오케스트레이션 패턴 정의

workflows:
  # 새 기능 개발 워크플로우
  feature_development:
    name: "새 기능 개발"
    type: "pipeline"
    steps:
      - name: "요구사항 분석 및 설계"
        agent: "claude"
        prompt_template: "design"
        output: "design.md"
      - name: "코드 구현"
        agent: "gemini"
        prompt_template: "implement"
        input_from: "previous"
        output: "implementation/"
      - name: "코드 리뷰"
        agent: "claude"
        prompt_template: "review"
        input_from: "previous"
        output: "review.md"
      - name: "테스트 작성"
        agent: "codex"
        prompt_template: "test"
        input_from: "step_2"
        output: "tests/"

  # 코드 리뷰 워크플로우 (병렬)
  code_review:
    name: "멀티 에이전트 코드 리뷰"
    type: "parallel"
    agents:
      - agent: "claude"
        focus: "아키텍처, 보안, 베스트 프랙티스"
        prompt_template: "review_architecture"
      - agent: "gemini"
        focus: "성능, 최적화 가능성"
        prompt_template: "review_performance"
      - agent: "codex"
        focus: "버그 가능성, 엣지 케이스"
        prompt_template: "review_bugs"
    merge_strategy: "combine_unique"
    output: "combined_review.md"

  # 버그 수정 워크플로우
  bug_fix:
    name: "버그 분석 및 수정"
    type: "role-based"
    roles:
      analyzer:
        agent: "claude"
        prompt_template: "analyze_bug"
        output: "analysis.md"
      fixer:
        agent: "codex"
        prompt_template: "fix_bug"
        input_from: "analyzer"
      verifier:
        agent: "gemini"
        prompt_template: "verify_fix"
        input_from: "fixer"

  # 리팩토링 워크플로우
  refactoring:
    name: "코드 리팩토링"
    type: "pipeline"
    steps:
      - name: "현재 코드 분석"
        agent: "claude"
        prompt_template: "analyze_refactor"
        output: "refactor_plan.md"
      - name: "리팩토링 수행"
        agent: "codex"
        prompt_template: "do_refactor"
        input_from: "previous"
      - name: "리팩토링 검증"
        agent: "claude"
        prompt_template: "verify_refactor"
        input_from: "previous"
        output: "refactor_report.md"

  # 문서화 워크플로우
  documentation:
    name: "코드 문서화"
    type: "parallel"
    agents:
      - agent: "claude"
        focus: "API 문서, 아키텍처 문서"
        prompt_template: "doc_api"
      - agent: "gemini"
        focus: "사용 예제, 튜토리얼"
        prompt_template: "doc_examples"
    merge_strategy: "structured"
    output: "docs/"

  # 빠른 수정 (단일 에이전트)
  quick_fix:
    name: "빠른 수정"
    type: "single"
    agent: "codex"
    approval_mode: "auto-edit"

# 병합 전략 정의
merge_strategies:
  combine_unique:
    description: "중복 제거 후 모든 결과 병합"
    priority_order: ["claude", "gemini", "codex"]

  structured:
    description: "섹션별로 구조화하여 병합"
    format: "markdown"

  vote:
    description: "동일한 제안이 2개 이상일 때 채택"
    threshold: 2

# 출력 형식
output_formats:
  default: "markdown"
  available: ["markdown", "json", "text"]
