# Prompt Templates (Gemini-Centric)
# Gemini-CLI 중심의 워크플로우를 위한 프롬프트 템플릿

templates:
  # --- 기능 개발 (feature_development) ---
  design_gemini:
    description: "Gemini의 기능 설계 및 목업 코드 생성"
    template: |
      당신은 시스템 아키텍트입니다. 다음 기능 요청에 대한 상세 설계를 작성하고, 각 파일의 기본 구조(목업 코드)를 생성해주세요.

      기능 요청: {{feature}}

      산출물:
      1.  **아키텍처 설계**: 주요 컴포넌트, 데이터 흐름, 기술 스택 제안
      2.  **파일별 목업 코드**: 각 파일의 기본 클래스/함수 구조 (구현은 비워둠)

      전체적인 그림을 그리고, 다음 단계의 리뷰어가 명확히 이해할 수 있도록 작성해주세요.

  review_design:
    description: "Claude의 설계 리뷰"
    template: |
      당신은 숙련된 코드 리뷰어입니다. 다음 Gemini가 작성한 설계안을 리뷰해주세요.

      {{design}}

      리뷰 관점:
      - 아키텍처의 적절성 및 확장성
      - 설계 패턴의 올바른 사용
      - 잠재적 보안 허점 또는 문제점
      - 더 나은 대안 제시 (필요 시)

      개선 제안 중심으로 구체적이고 실행 가능하게 작성해주세요.

  implement_from_review:
    description: "Gemini의 리뷰 기반 코드 구현"
    template: |
      당신은 소프트웨어 엔지니어입니다. 다음 최초 설계안과 리뷰 내용을 종합하여 최종 코드를 구현해주세요.

      **최초 설계:**
      {{design}}

      **리뷰 및 개선 제안:**
      {{review}}

      구현 요구사항:
      - 리뷰 내용을 충실히 반영하여 코드 작성
      - 모든 로직을 상세히 구현
      - 클린 코드 원칙 준수 및 가독성 높은 주석 포함

  # --- 버그 수정 (bug_fix) ---
  analyze_bug_gemini:
    description: "Gemini의 버그 분석"
    template: |
      당신은 디버깅 전문가입니다. 다음 버그 설명과 관련 코드를 바탕으로 근본 원인을 분석하고 수정 전략을 제시해주세요.

      버그 설명: {{bug_description}}
      관련 코드:
      ```
      {{code}}
      ```

      분석 항목:
      1.  **근본 원인 (Root Cause)**: 코드의 어떤 부분이 문제의 원인인지 정확히 지적해주세요.
      2.  **수정 전략**: 어떻게 수정해야 하는지에 대한 구체적인 전략을 제시해주세요.

  fix_bug:
    description: "Codex의 버그 수정"
    template: |
      다음 Gemini의 버그 분석을 바탕으로 수정 코드를 작성해주세요. Diff 형식으로 변경된 부분만 명확히 보여주세요.

      {{analysis}}

      요구사항:
      - 최소한의 변경으로 버그를 수정합니다.
      - 수정 이유를 주석으로 간략히 설명합니다.

  verify_fix_claude:
    description: "Claude의 수정 코드 검증"
    template: |
      당신은 QA 엔지니어입니다. 다음 버그 수정 내역을 검증해주세요.

      **버그 분석:**
      {{analysis}}

      **수정 코드(diff):**
      {{fix}}

      검증 항목:
      1.  수정 코드가 분석된 원인을 정확히 해결하는가?
      2.  수정으로 인해 발생할 수 있는 잠재적 사이드 이펙트는 없는가?
      3.  코드 스타일과 전체적인 일관성을 해치지 않는가?
      4.  최종 승인 여부 또는 추가 수정 제안.

  # --- 리팩토링 (refactoring) ---
  analyze_refactor_gemini:
    description: "Gemini의 리팩토링 분석"
    template: |
      다음 코드의 리팩토링 필요성을 분석하고 개선 계획을 수립해주세요.

      {{code}}

      분석 관점:
      - 코드 스멜 (Code Smells)
      - 복잡도 및 중복 코드
      - 성능 개선점
      - 리팩토링 우선순위 및 단계별 계획 제시

  do_refactor:
    description: "Claude의 리팩토링 수행"
    template: |
      다음 Gemini의 분석을 바탕으로 코드를 리팩토링해주세요.

      {{analysis}}

      요구사항:
      - 점진적 개선
      - 기능 동일성 유지
      - 테스트 가능성 향상
      - 주요 변경점에 대한 주석 추가

  verify_refactor_codex:
    description: "Codex의 리팩토링 검증"
    template: |
      다음 리팩토링된 코드가 기존 기능과 동일하게 동작하는지 검증하는 테스트 코드를 작성해주세요.

      **리팩토링 이전 코드:**
      {{original_code}}

      **리팩토링 이후 코드:**
      {{refactored_code}}

      요구사항:
      - 기능적 동일성을 검증하는 데 집중
      - 다양한 엣지 케이스 포함

  # --- 공통 및 기타 ---
  test:
    description: "테스트 코드 작성"
    template: |
      다음 코드에 대한 테스트를 작성해주세요:

      {{code}}

      요구사항:
      - 단위 테스트
      - 엣지 케이스 테스트
      - 테스트 커버리지 최대화

  doc_examples:
    description: "Gemini의 사용 예제 작성"
    template: |
      다음 코드의 사용 예제를 작성해주세요:

      {{code}}

      요구사항:
      - 기본 사용법
      - 고급 사용법
      - 실제 시나리오 예제

  doc_api_claude:
    description: "Claude의 API 문서 보완"
    template: |
      다음 코드와 Gemini가 작성한 예제를 바탕으로 완전한 API 문서를 작성해주세요.

      **코드:**
      {{code}}

      **사용 예제:**
      {{examples}}

      포함 항목:
      - 함수/메서드 상세 설명
      - 매개변수 및 반환값 타입/설명
      - 에러 케이스
      - 전체적인 구조 및 아키텍처 설명 추가
